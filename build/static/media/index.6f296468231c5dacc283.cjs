"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},precision=8,escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function ensureUnit(e,t){return"number"===typeof e?e+t:e}function quantity(e){if("string"===typeof e){const t=/^(\d+)\s*(.*)$/g.exec(e);return{value:t?+t[1]:0,unit:(null===t||void 0===t?void 0:t[2])||void 0}}return{value:Number(e)}}function alphaNumerate(e){return String.fromCharCode(97+e%26)}const EPSILON=2221e-19;function orderOfMagnitude(e){return Math.floor(Math.log(Math.abs(e))/Math.LN10)}function projectLength(e,t,s){return t/s.range*e}function roundWithPrecision(e,t){const s=Math.pow(10,t||8);return Math.round(e*s)/s}function rho(e){if(1===e)return e;function t(e,s){return e%s===0?s:t(s,e%s)}function s(e){return e*e+1}let i,r=2,n=2;if(e%2===0)return 2;do{r=s(r)%e,n=s(s(n))%e,i=t(Math.abs(r-n),e)}while(1===i);return i}function polarToCartesian(e,t,s,i){const r=(i-90)*Math.PI/180;return{x:e+s*Math.cos(r),y:t+s*Math.sin(r)}}function getBounds(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r={high:t.high,low:t.low,valueRange:0,oom:0,step:0,min:0,max:0,range:0,numberOfSteps:0,values:[]};r.valueRange=r.high-r.low,r.oom=orderOfMagnitude(r.valueRange),r.step=Math.pow(10,r.oom),r.min=Math.floor(r.low/r.step)*r.step,r.max=Math.ceil(r.high/r.step)*r.step,r.range=r.max-r.min,r.numberOfSteps=Math.round(r.range/r.step);const n=projectLength(e,r.step,r)<s,a=i?rho(r.range):0;if(i&&projectLength(e,1,r)>=s)r.step=1;else if(i&&a<r.step&&projectLength(e,a,r)>=s)r.step=a;else{let t=0;for(;;){if(n&&projectLength(e,r.step,r)<=s)r.step*=2;else{if(n||!(projectLength(e,r.step/2,r)>=s))break;if(r.step/=2,i&&r.step%1!==0){r.step*=2;break}}if(t++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}}function o(e,t){return e===(e+=t)&&(e*=1+(t>0?EPSILON:-EPSILON)),e}r.step=Math.max(r.step,EPSILON);let l=r.min,c=r.max;for(;l+r.step<=r.low;)l=o(l,r.step);for(;c-r.step>=r.high;)c=o(c,-r.step);r.min=l,r.max=c,r.range=r.max-r.min;const h=[];for(let u=r.min;u<=r.max;u=o(u,r.step)){const e=roundWithPrecision(u);e!==h[h.length-1]&&h.push(e)}return r.values=h,r}function extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];for(let r=0;r<s.length;r++){const t=s[r];for(const s in t){const i=t[s];e[s]="object"!==typeof i||null===i||i instanceof Array?i:extend(e[s],i)}}return e}const noop=e=>e;function times(e,t){return Array.from({length:e},t?(e,s)=>t(s):()=>{})}const sum=(e,t)=>e+(t||0),serialMap=(e,t)=>times(Math.max(...e.map((e=>e.length))),(s=>t(...e.map((e=>e[s])))));function safeHasProperty(e,t){return null!==e&&"object"===typeof e&&Reflect.has(e,t)}function isNumeric(e){return null!==e&&isFinite(e)}function isFalseyButZero(e){return!e&&0!==e}function getNumberOrUndefined(e){return isNumeric(e)?Number(e):void 0}function isArrayOfArrays(e){return!!Array.isArray(e)&&e.every(Array.isArray)}function each(e,t){let s=0;e[arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"reduceRight":"reduce"](((e,i,r)=>t(i,s++,r)),void 0)}function getMetaData(e,t){const s=Array.isArray(e)?e[t]:safeHasProperty(e,"data")?e.data[t]:null;return safeHasProperty(s,"meta")?s.meta:void 0}function isDataHoleValue(e){return null===e||void 0===e||"number"===typeof e&&isNaN(e)}function isArrayOfSeries(e){return Array.isArray(e)&&e.every((e=>Array.isArray(e)||safeHasProperty(e,"data")))}function isMultiValue(e){return"object"===typeof e&&null!==e&&(Reflect.has(e,"x")||Reflect.has(e,"y"))}function getMultiValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return isMultiValue(e)&&safeHasProperty(e,t)?getNumberOrUndefined(e[t]):getNumberOrUndefined(e)}function getHighLow(e,t,s){const i={high:void 0===(t={...t,...s?"x"===s?t.axisX:t.axisY:{}}).high?-Number.MAX_VALUE:+t.high,low:void 0===t.low?Number.MAX_VALUE:+t.low},r=void 0===t.high,n=void 0===t.low;return(r||n)&&function e(t){if(!isDataHoleValue(t))if(Array.isArray(t))for(let s=0;s<t.length;s++)e(t[s]);else{const e=Number(s&&safeHasProperty(t,s)?t[s]:t);r&&e>i.high&&(i.high=e),n&&e<i.low&&(i.low=e)}}(e),(t.referenceValue||0===t.referenceValue)&&(i.high=Math.max(t.referenceValue,i.high),i.low=Math.min(t.referenceValue,i.low)),i.high<=i.low&&(0===i.low?i.high=1:i.low<0?i.high=0:(i.high>0||(i.high=1),i.low=0)),i}function normalizeData(e){let t,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const n={labels:(e.labels||[]).slice(),series:normalizeSeries(e.series,i,r)},a=n.labels.length;return isArrayOfArrays(n.series)?(t=Math.max(a,...n.series.map((e=>e.length))),n.series.forEach((e=>{e.push(...times(Math.max(0,t-e.length)))}))):t=n.series.length,n.labels.push(...times(Math.max(0,t-a),(()=>""))),s&&reverseData(n),n}function reverseData(e){var t;null===(t=e.labels)||void 0===t||t.reverse(),e.series.reverse();for(const s of e.series)safeHasProperty(s,"data")?s.data.reverse():Array.isArray(s)&&s.reverse()}function normalizeMulti(e,t){let s,i;if("object"!==typeof e){const r=getNumberOrUndefined(e);"x"===t?s=r:i=r}else safeHasProperty(e,"x")&&(s=getNumberOrUndefined(e.x)),safeHasProperty(e,"y")&&(i=getNumberOrUndefined(e.y));if(void 0!==s||void 0!==i)return{x:s,y:i}}function normalizePrimitive(e,t){if(!isDataHoleValue(e))return t?normalizeMulti(e,t):getNumberOrUndefined(e)}function normalizeSingleSeries(e,t){return Array.isArray(e)?e.map((e=>safeHasProperty(e,"value")?normalizePrimitive(e.value,t):normalizePrimitive(e,t))):normalizeSingleSeries(e.data,t)}function normalizeSeries(e,t,s){if(isArrayOfSeries(e))return e.map((e=>normalizeSingleSeries(e,t)));const i=normalizeSingleSeries(e,t);return s?i.map((e=>[e])):i}function splitIntoSegments(e,t,s){const i={increasingX:!1,fillHoles:!1,...s},r=[];let n=!0;for(let a=0;a<e.length;a+=2)void 0===getMultiValue(t[a/2].value)?i.fillHoles||(n=!0):(i.increasingX&&a>=2&&e[a]<=e[a-2]&&(n=!0),n&&(r.push({pathCoordinates:[],valueData:[]}),n=!1),r[r.length-1].pathCoordinates.push(e[a],e[a+1]),r[r.length-1].valueData.push(t[a/2]));return r}function serialize(e){let t="";return null===e||void 0===e?e:(t="number"===typeof e?""+e:"object"===typeof e?JSON.stringify({data:e}):String(e),Object.keys(escapingMap).reduce(((e,t)=>e.replaceAll(t,escapingMap[t])),t))}function deserialize(e){if("string"!==typeof e)return e;if("NaN"===e)return NaN;let t=e=Object.keys(escapingMap).reduce(((e,t)=>e.replaceAll(escapingMap[t],t)),e);if("string"===typeof e)try{t=JSON.parse(e),t=void 0!==t.data?t.data:t}catch(s){}return t}class SvgList{call(e,t){return this.svgElements.forEach((s=>Reflect.apply(s[e],s,t))),this}attr(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("attr",t)}elem(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("elem",t)}root(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("root",t)}getNode(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("getNode",t)}foreignObject(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("foreignObject",t)}text(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("text",t)}empty(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("empty",t)}remove(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("remove",t)}addClass(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("addClass",t)}removeClass(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("removeClass",t)}removeAllClasses(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("removeAllClasses",t)}animate(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.call("animate",t)}constructor(e){this.svgElements=[];for(let t=0;t<e.length;t++)this.svgElements.push(new Svg(e[t]))}}const easings={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function createAnimation(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;const{easing:n,...a}=s,o={};let l,c;n&&(l=Array.isArray(n)?n:easings[n]),a.begin=ensureUnit(a.begin,"ms"),a.dur=ensureUnit(a.dur,"ms"),l&&(a.calcMode="spline",a.keySplines=l.join(" "),a.keyTimes="0;1"),i&&(a.fill="freeze",o[t]=a.from,e.attr(o),c=quantity(a.begin||0).value,a.begin="indefinite");const h=e.elem("animate",{attributeName:t,...a});i&&setTimeout((()=>{try{h._node.beginElement()}catch(s){o[t]=a.to,e.attr(o),h.remove()}}),c);const u=h.getNode();r&&u.addEventListener("beginEvent",(()=>r.emit("animationBegin",{element:e,animate:u,params:s}))),u.addEventListener("endEvent",(()=>{r&&r.emit("animationEnd",{element:e,animate:u,params:s}),i&&(o[t]=a.to,e.attr(o),h.remove())}))}class Svg{attr(e,t){return"string"===typeof e?t?this._node.getAttributeNS(t,e):this._node.getAttribute(e):(Object.keys(e).forEach((t=>{if(void 0!==e[t])if(-1!==t.indexOf(":")){const s=t.split(":");this._node.setAttributeNS(namespaces[s[0]],t,String(e[t]))}else this._node.setAttribute(t,String(e[t]))})),this)}elem(e,t,s){return new Svg(e,t,s,this,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}parent(){return this._node.parentNode instanceof SVGElement?new Svg(this._node.parentNode):null}root(){let e=this._node;for(;"svg"!==e.nodeName&&e.parentElement;)e=e.parentElement;return new Svg(e)}querySelector(e){const t=this._node.querySelector(e);return t?new Svg(t):null}querySelectorAll(e){const t=this._node.querySelectorAll(e);return new SvgList(t)}getNode(){return this._node}foreignObject(e,t,s){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("string"===typeof e){const t=document.createElement("div");t.innerHTML=e,i=t.firstChild}else i=e;i instanceof Element&&i.setAttribute("xmlns",namespaces.xmlns);const n=this.elem("foreignObject",t,s,r);return n._node.appendChild(i),n}text(e){return this._node.appendChild(document.createTextNode(e)),this}empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}remove(){var e;return null===(e=this._node.parentNode)||void 0===e||e.removeChild(this._node),this.parent()}replace(e){var t;return null===(t=this._node.parentNode)||void 0===t||t.replaceChild(e._node,this._node),e}append(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this._node.firstChild?this._node.insertBefore(e._node,this._node.firstChild):this._node.appendChild(e._node),this}classes(){const e=this._node.getAttribute("class");return e?e.trim().split(/\s+/):[]}addClass(e){return this._node.setAttribute("class",this.classes().concat(e.trim().split(/\s+/)).filter((function(e,t,s){return s.indexOf(e)===t})).join(" ")),this}removeClass(e){const t=e.trim().split(/\s+/);return this._node.setAttribute("class",this.classes().filter((e=>-1===t.indexOf(e))).join(" ")),this}removeAllClasses(){return this._node.setAttribute("class",""),this}height(){return this._node.getBoundingClientRect().height}width(){return this._node.getBoundingClientRect().width}animate(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2?arguments[2]:void 0;return Object.keys(e).forEach((i=>{const r=e[i];Array.isArray(r)?r.forEach((e=>createAnimation(this,i,e,!1,s))):createAnimation(this,i,r,t,s)})),this}constructor(e,t,s,i,r=!1){e instanceof Element?this._node=e:(this._node=document.createElementNS(namespaces.svg,e),"svg"===e&&this.attr({"xmlns:ct":namespaces.ct})),t&&this.attr(t),s&&this.addClass(s),i&&(r&&i._node.firstChild?i._node.insertBefore(this._node,i._node.firstChild):i._node.appendChild(this._node))}}function createSvg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"100%",i=arguments.length>3?arguments[3]:void 0;Array.from(e.querySelectorAll("svg")).filter((e=>e.getAttributeNS(namespaces.xmlns,"ct"))).forEach((t=>e.removeChild(t)));const r=new Svg("svg").attr({width:t,height:s}).attr({style:"width: ".concat(t,"; height: ").concat(s,";")});return i&&r.addClass(i),e.appendChild(r.getNode()),r}function normalizePadding(e){return"number"===typeof e?{top:e,right:e,bottom:e,left:e}:void 0===e?{top:0,right:0,bottom:0,left:0}:{top:"number"===typeof e.top?e.top:0,right:"number"===typeof e.right?e.right:0,bottom:"number"===typeof e.bottom?e.bottom:0,left:"number"===typeof e.left?e.left:0}}function createChartRect(e,t){var s,i,r,n;const a=Boolean(t.axisX||t.axisY),o=(null===(s=t.axisY)||void 0===s?void 0:s.offset)||0,l=(null===(i=t.axisX)||void 0===i?void 0:i.offset)||0,c=null===(r=t.axisY)||void 0===r?void 0:r.position,h=null===(n=t.axisX)||void 0===n?void 0:n.position;let u=e.width()||quantity(t.width).value||0,d=e.height()||quantity(t.height).value||0;const p=normalizePadding(t.chartPadding);u=Math.max(u,o+p.left+p.right),d=Math.max(d,l+p.top+p.bottom);const m={x1:0,x2:0,y1:0,y2:0,padding:p,width(){return this.x2-this.x1},height(){return this.y1-this.y2}};return a?("start"===h?(m.y2=p.top+l,m.y1=Math.max(d-p.bottom,m.y2+1)):(m.y2=p.top,m.y1=Math.max(d-p.bottom-l,m.y2+1)),"start"===c?(m.x1=p.left+o,m.x2=Math.max(u-p.right,m.x1+1)):(m.x1=p.left,m.x2=Math.max(u-p.right-o,m.x1+1))):(m.x1=p.left,m.x2=Math.max(u-p.right,m.x1+1),m.y2=p.top,m.y1=Math.max(d-p.bottom,m.y2+1)),m}function createGrid(e,t,s,i,r,n,a,o){const l={["".concat(s.units.pos,"1")]:e,["".concat(s.units.pos,"2")]:e,["".concat(s.counterUnits.pos,"1")]:i,["".concat(s.counterUnits.pos,"2")]:i+r},c=n.elem("line",l,a.join(" "));o.emit("draw",{type:"grid",axis:s,index:t,group:n,element:c,...l})}function createGridBackground(e,t,s,i){const r=e.elem("rect",{x:t.x1,y:t.y2,width:t.width(),height:t.height()},s,!0);i.emit("draw",{type:"gridBackground",group:e,element:r})}function createLabel(e,t,s,i,r,n,a,o,l,c){const h={[r.units.pos]:e+a[r.units.pos],[r.counterUnits.pos]:a[r.counterUnits.pos],[r.units.len]:t,[r.counterUnits.len]:Math.max(0,n-10)},u=Math.round(h[r.units.len]),d=Math.round(h[r.counterUnits.len]),p=document.createElement("span");p.className=l.join(" "),p.style[r.units.len]=u+"px",p.style[r.counterUnits.len]=d+"px",p.textContent=String(i);const m=o.foreignObject(p,{style:"overflow: visible;",...h});c.emit("draw",{type:"label",axis:r,index:s,group:o,element:m,text:i,...h})}function optionsProvider(e,t,s){let i;const r=[];function n(r){const n=i;i=extend({},e),t&&t.forEach((e=>{window.matchMedia(e[0]).matches&&(i=extend(i,e[1]))})),s&&r&&s.emit("optionsChanged",{previousOptions:n,currentOptions:i})}if(!window.matchMedia)throw new Error("window.matchMedia not found! Make sure you're using a polyfill.");return t&&t.forEach((e=>{const t=window.matchMedia(e[0]);t.addEventListener("change",n),r.push(t)})),n(),{removeMediaQueryListeners:function(){r.forEach((e=>e.removeEventListener("change",n)))},getCurrentOptions:()=>i}}Svg.Easing=easings;const elementDescriptions={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},defaultOptions$3={accuracy:3};function element(e,t,s,i,r,n){const a={command:r?e.toLowerCase():e.toUpperCase(),...t,...n?{data:n}:{}};s.splice(i,0,a)}function forEachParam(e,t){e.forEach(((s,i)=>{elementDescriptions[s.command.toLowerCase()].forEach(((r,n)=>{t(s,r,i,n,e)}))}))}class SvgPath{static join(e){const t=new SvgPath(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2?arguments[2]:void 0);for(let s=0;s<e.length;s++){const i=e[s];for(let e=0;e<i.pathElements.length;e++)t.pathElements.push(i.pathElements[e])}return t}position(e){return void 0!==e?(this.pos=Math.max(0,Math.min(this.pathElements.length,e)),this):this.pos}remove(e){return this.pathElements.splice(this.pos,e),this}move(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;return element("M",{x:+e,y:+t},this.pathElements,this.pos++,s,i),this}line(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;return element("L",{x:+e,y:+t},this.pathElements,this.pos++,s,i),this}curve(e,t,s,i,r,n){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7?arguments[7]:void 0;return element("C",{x1:+e,y1:+t,x2:+s,y2:+i,x:+r,y:+n},this.pathElements,this.pos++,a,o),this}arc(e,t,s,i,r,n,a){let o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8?arguments[8]:void 0;return element("A",{rx:e,ry:t,xAr:s,lAf:i,sf:r,x:n,y:a},this.pathElements,this.pos++,o,l),this}parse(e){const t=e.replace(/([A-Za-z])(-?[0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(((e,t)=>(t.match(/[A-Za-z]/)&&e.push([]),e[e.length-1].push(t),e)),[]);"Z"===t[t.length-1][0].toUpperCase()&&t.pop();const s=t.map((e=>{const t=e.shift(),s=elementDescriptions[t.toLowerCase()];return{command:t,...s.reduce(((t,s,i)=>(t[s]=+e[i],t)),{})}}));return this.pathElements.splice(this.pos,0,...s),this.pos+=s.length,this}stringify(){const e=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(((t,s)=>{const i=elementDescriptions[s.command.toLowerCase()].map((t=>{const i=s[t];return this.options.accuracy?Math.round(i*e)/e:i}));return t+s.command+i.join(",")}),"")+(this.close?"Z":"")}scale(e,t){return forEachParam(this.pathElements,((s,i)=>{s[i]*="x"===i[0]?e:t})),this}translate(e,t){return forEachParam(this.pathElements,((s,i)=>{s[i]+="x"===i[0]?e:t})),this}transform(e){return forEachParam(this.pathElements,((t,s,i,r,n)=>{const a=e(t,s,i,r,n);(a||0===a)&&(t[s]=a)})),this}clone(){const e=new SvgPath(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.close);return e.pos=this.pos,e.pathElements=this.pathElements.slice().map((e=>({...e}))),e.options={...this.options},e}splitByCommand(e){const t=[new SvgPath];return this.pathElements.forEach((s=>{s.command===e.toUpperCase()&&0!==t[t.length-1].pathElements.length&&t.push(new SvgPath),t[t.length-1].pathElements.push(s)})),t}constructor(e=!1,t){this.close=e,this.pathElements=[],this.pos=0,this.options={...defaultOptions$3,...t}}}function none(e){const t={fillHoles:!1,...e};return function(e,s){const i=new SvgPath;let r=!0;for(let n=0;n<e.length;n+=2){const a=e[n],o=e[n+1],l=s[n/2];void 0!==getMultiValue(l.value)?(r?i.move(a,o,!1,l):i.line(a,o,!1,l),r=!1):t.fillHoles||(r=!0)}return i}}function simple(e){const t={divisor:2,fillHoles:!1,...e},s=1/Math.max(1,t.divisor);return function(e,i){const r=new SvgPath;let n,a=0,o=0;for(let l=0;l<e.length;l+=2){const c=e[l],h=e[l+1],u=(c-a)*s,d=i[l/2];void 0!==d.value?(void 0===n?r.move(c,h,!1,d):r.curve(a+u,o,c-u,h,c,h,!1,d),a=c,o=h,n=d):t.fillHoles||(a=o=0,n=void 0)}return r}}function step(e){const t={postpone:!0,fillHoles:!1,...e};return function(e,s){const i=new SvgPath;let r,n=0,a=0;for(let o=0;o<e.length;o+=2){const l=e[o],c=e[o+1],h=s[o/2];void 0!==h.value?(void 0===r?i.move(l,c,!1,h):(t.postpone?i.line(l,a,!1,r):i.line(n,c,!1,h),i.line(l,c,!1,h)),n=l,a=c,r=h):t.fillHoles||(n=a=0,r=void 0)}return i}}function cardinal(e){const t={tension:1,fillHoles:!1,...e},s=Math.min(1,Math.max(0,t.tension)),i=1-s;return function e(r,n){const a=splitIntoSegments(r,n,{fillHoles:t.fillHoles});if(a.length){if(a.length>1)return SvgPath.join(a.map((t=>e(t.pathCoordinates,t.valueData))));{if(r=a[0].pathCoordinates,n=a[0].valueData,r.length<=4)return none()(r,n);const e=(new SvgPath).move(r[0],r[1],!1,n[0]),t=!1;for(let a=0,o=r.length;o-2*Number(!t)>a;a+=2){const t=[{x:+r[a-2],y:+r[a-1]},{x:+r[a],y:+r[a+1]},{x:+r[a+2],y:+r[a+3]},{x:+r[a+4],y:+r[a+5]}];o-4===a?t[3]=t[2]:a||(t[0]={x:+r[a],y:+r[a+1]}),e.curve(s*(-t[0].x+6*t[1].x+t[2].x)/6+i*t[2].x,s*(-t[0].y+6*t[1].y+t[2].y)/6+i*t[2].y,s*(t[1].x+6*t[2].x-t[3].x)/6+i*t[2].x,s*(t[1].y+6*t[2].y-t[3].y)/6+i*t[2].y,t[2].x,t[2].y,!1,n[(a+2)/2])}return e}}return none()([],[])}}function monotoneCubic(e){const t={fillHoles:!1,...e};return function e(s,i){const r=splitIntoSegments(s,i,{fillHoles:t.fillHoles,increasingX:!0});if(r.length){if(r.length>1)return SvgPath.join(r.map((t=>e(t.pathCoordinates,t.valueData))));{if(s=r[0].pathCoordinates,i=r[0].valueData,s.length<=4)return none()(s,i);const e=[],t=[],n=s.length/2,a=[],o=[],l=[],c=[];for(let i=0;i<n;i++)e[i]=s[2*i],t[i]=s[2*i+1];for(let s=0;s<n-1;s++)l[s]=t[s+1]-t[s],c[s]=e[s+1]-e[s],o[s]=l[s]/c[s];a[0]=o[0],a[n-1]=o[n-2];for(let s=1;s<n-1;s++)0===o[s]||0===o[s-1]||o[s-1]>0!==o[s]>0?a[s]=0:(a[s]=3*(c[s-1]+c[s])/((2*c[s]+c[s-1])/o[s-1]+(c[s]+2*c[s-1])/o[s]),isFinite(a[s])||(a[s]=0));const h=(new SvgPath).move(e[0],t[0],!1,i[0]);for(let s=0;s<n-1;s++)h.curve(e[s]+c[s]/3,t[s]+a[s]*c[s]/3,e[s+1]-c[s]/3,t[s+1]-a[s+1]*c[s]/3,e[s+1],t[s+1],!1,i[s+1]);return h}}return none()([],[])}}var index=Object.freeze({__proto__:null,none:none,simple:simple,step:step,cardinal:cardinal,monotoneCubic:monotoneCubic});class EventEmitter{on(e,t){const{allListeners:s,listeners:i}=this;"*"===e?s.add(t):(i.has(e)||i.set(e,new Set),i.get(e).add(t))}off(e,t){const{allListeners:s,listeners:i}=this;if("*"===e)t?s.delete(t):s.clear();else if(i.has(e)){const s=i.get(e);t?s.delete(t):s.clear(),s.size||i.delete(e)}}emit(e,t){const{allListeners:s,listeners:i}=this;i.has(e)&&i.get(e).forEach((e=>e(t))),s.forEach((s=>s(e,t)))}constructor(){this.listeners=new Map,this.allListeners=new Set}}const instances=new WeakMap;class BaseChart{update(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i;(e&&(this.data=e||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),t)&&(this.options=extend({},s?this.options:this.defaultOptions,t),this.initializeTimeoutId||(null===(i=this.optionsProvider)||void 0===i||i.removeMediaQueryListeners(),this.optionsProvider=optionsProvider(this.options,this.responsiveOptions,this.eventEmitter)));return!this.initializeTimeoutId&&this.optionsProvider&&this.createChart(this.optionsProvider.getCurrentOptions()),this}detach(){var e;this.initializeTimeoutId?window.clearTimeout(this.initializeTimeoutId):(window.removeEventListener("resize",this.resizeListener),null===(e=this.optionsProvider)||void 0===e||e.removeMediaQueryListeners());return instances.delete(this.container),this}on(e,t){return this.eventEmitter.on(e,t),this}off(e,t){return this.eventEmitter.off(e,t),this}initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.on("optionsChanged",(()=>this.update())),this.options.plugins&&this.options.plugins.forEach((e=>{Array.isArray(e)?e[0](this,e[1]):e(this)})),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=null}constructor(e,t,s,i,r){this.data=t,this.defaultOptions=s,this.options=i,this.responsiveOptions=r,this.eventEmitter=new EventEmitter,this.resizeListener=()=>this.update(),this.initializeTimeoutId=setTimeout((()=>this.initialize()),0);const n="string"===typeof e?document.querySelector(e):e;if(!n)throw new Error("Target element is not found");this.container=n;const a=instances.get(n);a&&a.detach(),instances.set(n,this)}}const axisUnits={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};class Axis{createGridAndLabels(e,t,s,i){const r="x"===this.units.pos?s.axisX:s.axisY,n=this.ticks.map(((e,t)=>this.projectValue(e,t))),a=this.ticks.map(r.labelInterpolationFnc);n.forEach(((o,l)=>{const c=a[l],h={x:0,y:0};let u;u=n[l+1]?n[l+1]-o:Math.max(this.axisLength-o,this.axisLength/this.ticks.length),""!==c&&isFalseyButZero(c)||("x"===this.units.pos?(o=this.chartRect.x1+o,h.x=s.axisX.labelOffset.x,"start"===s.axisX.position?h.y=this.chartRect.padding.top+s.axisX.labelOffset.y+5:h.y=this.chartRect.y1+s.axisX.labelOffset.y+5):(o=this.chartRect.y1-o,h.y=s.axisY.labelOffset.y-u,"start"===s.axisY.position?h.x=this.chartRect.padding.left+s.axisY.labelOffset.x:h.x=this.chartRect.x2+s.axisY.labelOffset.x+10),r.showGrid&&createGrid(o,l,this,this.gridOffset,this.chartRect[this.counterUnits.len](),e,[s.classNames.grid,s.classNames[this.units.dir]],i),r.showLabel&&createLabel(o,u,l,c,this,r.offset,h,t,[s.classNames.label,s.classNames[this.units.dir],"start"===r.position?s.classNames[r.position]:s.classNames.end],i))}))}constructor(e,t,s){this.units=e,this.chartRect=t,this.ticks=s,this.counterUnits=e===axisUnits.x?axisUnits.y:axisUnits.x,this.axisLength=t[this.units.rectEnd]-t[this.units.rectStart],this.gridOffset=t[this.units.rectOffset]}}class AutoScaleAxis extends Axis{projectValue(e){const t=Number(getMultiValue(e,this.units.pos));return this.axisLength*(t-this.bounds.min)/this.bounds.range}constructor(e,t,s,i){const r=i.highLow||getHighLow(t,i,e.pos),n=getBounds(s[e.rectEnd]-s[e.rectStart],r,i.scaleMinSpace||20,i.onlyInteger),a={min:n.min,max:n.max};super(e,s,n.values),this.bounds=n,this.range=a}}class FixedScaleAxis extends Axis{projectValue(e){const t=Number(getMultiValue(e,this.units.pos));return this.axisLength*(t-this.range.min)/(this.range.max-this.range.min)}constructor(e,t,s,i){const r=i.highLow||getHighLow(t,i,e.pos),n=i.divisor||1,a=(i.ticks||times(n,(e=>r.low+(r.high-r.low)/n*e))).sort(((e,t)=>Number(e)-Number(t))),o={min:r.low,max:r.high};super(e,s,a),this.range=o}}class StepAxis extends Axis{projectValue(e,t){return this.stepLength*t}constructor(e,t,s,i){const r=i.ticks||[];super(e,s,r);const n=Math.max(1,r.length-(i.stretch?1:0));this.stepLength=this.axisLength/n,this.stretch=Boolean(i.stretch)}}function getSeriesOption(e,t,s){var i;if(safeHasProperty(e,"name")&&e.name&&(null===(i=t.series)||void 0===i?void 0:i[e.name])){const i=(null===t||void 0===t?void 0:t.series[e.name])[s];return void 0===i?t[s]:i}return t[s]}const defaultOptions$2={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};class LineChart extends BaseChart{createChart(e){const{data:t}=this,s=normalizeData(t,e.reverseData,!0),i=createSvg(this.container,e.width,e.height,e.classNames.chart);this.svg=i;const r=i.elem("g").addClass(e.classNames.gridGroup),n=i.elem("g"),a=i.elem("g").addClass(e.classNames.labelGroup),o=createChartRect(i,e);let l,c;l=void 0===e.axisX.type?new StepAxis(axisUnits.x,s.series,o,{...e.axisX,ticks:s.labels,stretch:e.fullWidth}):new e.axisX.type(axisUnits.x,s.series,o,e.axisX),c=void 0===e.axisY.type?new AutoScaleAxis(axisUnits.y,s.series,o,{...e.axisY,high:isNumeric(e.high)?e.high:e.axisY.high,low:isNumeric(e.low)?e.low:e.axisY.low}):new e.axisY.type(axisUnits.y,s.series,o,e.axisY),l.createGridAndLabels(r,a,e,this.eventEmitter),c.createGridAndLabels(r,a,e,this.eventEmitter),e.showGridBackground&&createGridBackground(r,o,e.classNames.gridBackground,this.eventEmitter),each(t.series,((t,i)=>{const r=n.elem("g"),a=safeHasProperty(t,"name")&&t.name,h=safeHasProperty(t,"className")&&t.className,u=safeHasProperty(t,"meta")?t.meta:void 0;a&&r.attr({"ct:series-name":a}),u&&r.attr({"ct:meta":serialize(u)}),r.addClass([e.classNames.series,h||"".concat(e.classNames.series,"-").concat(alphaNumerate(i))].join(" "));const d=[],p=[];s.series[i].forEach(((e,r)=>{const n={x:o.x1+l.projectValue(e,r,s.series[i]),y:o.y1-c.projectValue(e,r,s.series[i])};d.push(n.x,n.y),p.push({value:e,valueIndex:r,meta:getMetaData(t,r)})}));const m={lineSmooth:getSeriesOption(t,e,"lineSmooth"),showPoint:getSeriesOption(t,e,"showPoint"),showLine:getSeriesOption(t,e,"showLine"),showArea:getSeriesOption(t,e,"showArea"),areaBase:getSeriesOption(t,e,"areaBase")};let g;g="function"===typeof m.lineSmooth?m.lineSmooth:m.lineSmooth?monotoneCubic():none();const x=g(d,p);if(m.showPoint&&x.pathElements.forEach((s=>{const{data:n}=s,a=r.elem("line",{x1:s.x,y1:s.y,x2:s.x+.01,y2:s.y},e.classNames.point);if(n){let e,t;safeHasProperty(n.value,"x")&&(e=n.value.x),safeHasProperty(n.value,"y")&&(t=n.value.y),a.attr({"ct:value":[e,t].filter(isNumeric).join(","),"ct:meta":serialize(n.meta)})}this.eventEmitter.emit("draw",{type:"point",value:null===n||void 0===n?void 0:n.value,index:(null===n||void 0===n?void 0:n.valueIndex)||0,meta:null===n||void 0===n?void 0:n.meta,series:t,seriesIndex:i,axisX:l,axisY:c,group:r,element:a,x:s.x,y:s.y,chartRect:o})})),m.showLine){const n=r.elem("path",{d:x.stringify()},e.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:s.series[i],path:x.clone(),chartRect:o,index:i,series:t,seriesIndex:i,meta:u,axisX:l,axisY:c,group:r,element:n})}if(m.showArea&&c.range){const n=Math.max(Math.min(m.areaBase,c.range.max),c.range.min),a=o.y1-c.projectValue(n);x.splitByCommand("M").filter((e=>e.pathElements.length>1)).map((e=>{const t=e.pathElements[0],s=e.pathElements[e.pathElements.length-1];return e.clone(!0).position(0).remove(1).move(t.x,a).line(t.x,t.y).position(e.pathElements.length+1).line(s.x,a)})).forEach((n=>{const a=r.elem("path",{d:n.stringify()},e.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:s.series[i],path:n.clone(),series:t,seriesIndex:i,axisX:l,axisY:c,chartRect:o,index:i,group:r,element:a,meta:u})}))}}),e.reverseData),this.eventEmitter.emit("created",{chartRect:o,axisX:l,axisY:c,svg:i,options:e})}constructor(e,t,s,i){super(e,t,defaultOptions$2,extend({},defaultOptions$2,s),i),this.data=t}}function getSerialSums(e){return serialMap(e,(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Array.from(t).reduce(((e,t)=>({x:e.x+(safeHasProperty(t,"x")?t.x:0),y:e.y+(safeHasProperty(t,"y")?t.y:0)})),{x:0,y:0})}))}const defaultOptions$1={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};class BarChart extends BaseChart{createChart(e){const{data:t}=this,s=normalizeData(t,e.reverseData,e.horizontalBars?"x":"y",!0),i=createSvg(this.container,e.width,e.height,e.classNames.chart+(e.horizontalBars?" "+e.classNames.horizontalBars:"")),r=e.stackBars&&!0!==e.stackMode&&s.series.length?getHighLow([getSerialSums(s.series)],e,e.horizontalBars?"x":"y"):getHighLow(s.series,e,e.horizontalBars?"x":"y");this.svg=i;const n=i.elem("g").addClass(e.classNames.gridGroup),a=i.elem("g"),o=i.elem("g").addClass(e.classNames.labelGroup);"number"===typeof e.high&&(r.high=e.high),"number"===typeof e.low&&(r.low=e.low);const l=createChartRect(i,e);let c;const h=e.distributeSeries&&e.stackBars?s.labels.slice(0,1):s.labels;let u,d,p;e.horizontalBars?(c=d=void 0===e.axisX.type?new AutoScaleAxis(axisUnits.x,s.series,l,{...e.axisX,highLow:r,referenceValue:0}):new e.axisX.type(axisUnits.x,s.series,l,{...e.axisX,highLow:r,referenceValue:0}),u=p=void 0===e.axisY.type?new StepAxis(axisUnits.y,s.series,l,{ticks:h}):new e.axisY.type(axisUnits.y,s.series,l,e.axisY)):(u=d=void 0===e.axisX.type?new StepAxis(axisUnits.x,s.series,l,{ticks:h}):new e.axisX.type(axisUnits.x,s.series,l,e.axisX),c=p=void 0===e.axisY.type?new AutoScaleAxis(axisUnits.y,s.series,l,{...e.axisY,highLow:r,referenceValue:0}):new e.axisY.type(axisUnits.y,s.series,l,{...e.axisY,highLow:r,referenceValue:0}));const m=e.horizontalBars?l.x1+c.projectValue(0):l.y1-c.projectValue(0),g="accumulate"===e.stackMode,x="accumulate-relative"===e.stackMode,f=[],v=[];let y=f;u.createGridAndLabels(n,o,e,this.eventEmitter),c.createGridAndLabels(n,o,e,this.eventEmitter),e.showGridBackground&&createGridBackground(n,l,e.classNames.gridBackground,this.eventEmitter),each(t.series,((i,r)=>{const n=r-(t.series.length-1)/2;let o;o=e.distributeSeries&&!e.stackBars?u.axisLength/s.series.length/2:e.distributeSeries&&e.stackBars?u.axisLength/2:u.axisLength/s.series[r].length/2;const h=a.elem("g"),w=safeHasProperty(i,"name")&&i.name,b=safeHasProperty(i,"className")&&i.className,S=safeHasProperty(i,"meta")?i.meta:void 0;w&&h.attr({"ct:series-name":w}),S&&h.attr({"ct:meta":serialize(S)}),h.addClass([e.classNames.series,b||"".concat(e.classNames.series,"-").concat(alphaNumerate(r))].join(" ")),s.series[r].forEach(((t,a)=>{const w=safeHasProperty(t,"x")&&t.x,b=safeHasProperty(t,"y")&&t.y;let S,A;S=e.distributeSeries&&!e.stackBars?r:e.distributeSeries&&e.stackBars?0:a,A=e.horizontalBars?{x:l.x1+c.projectValue(w||0,a,s.series[r]),y:l.y1-u.projectValue(b||0,S,s.series[r])}:{x:l.x1+u.projectValue(w||0,S,s.series[r]),y:l.y1-c.projectValue(b||0,a,s.series[r])},u instanceof StepAxis&&(u.stretch||(A[u.units.pos]+=o*(e.horizontalBars?-1:1)),A[u.units.pos]+=e.stackBars||e.distributeSeries?0:n*e.seriesBarDistance*(e.horizontalBars?-1:1)),x&&(y=b>=0||w>=0?f:v);const E=y[a]||m;if(y[a]=E-(m-A[u.counterUnits.pos]),void 0===t)return;const M={["".concat(u.units.pos,"1")]:A[u.units.pos],["".concat(u.units.pos,"2")]:A[u.units.pos]};e.stackBars&&(g||x||!e.stackMode)?(M["".concat(u.counterUnits.pos,"1")]=E,M["".concat(u.counterUnits.pos,"2")]=y[a]):(M["".concat(u.counterUnits.pos,"1")]=m,M["".concat(u.counterUnits.pos,"2")]=A[u.counterUnits.pos]),M.x1=Math.min(Math.max(M.x1,l.x1),l.x2),M.x2=Math.min(Math.max(M.x2,l.x1),l.x2),M.y1=Math.min(Math.max(M.y1,l.y2),l.y1),M.y2=Math.min(Math.max(M.y2,l.y2),l.y1);const O=getMetaData(i,a),N=h.elem("line",M,e.classNames.bar).attr({"ct:value":[w,b].filter(isNumeric).join(","),"ct:meta":serialize(O)});this.eventEmitter.emit("draw",{type:"bar",value:t,index:a,meta:O,series:i,seriesIndex:r,axisX:d,axisY:p,chartRect:l,group:h,element:N,...M})}))}),e.reverseData),this.eventEmitter.emit("created",{chartRect:l,axisX:d,axisY:p,svg:i,options:e})}constructor(e,t,s,i){super(e,t,defaultOptions$1,extend({},defaultOptions$1,s),i),this.data=t}}const defaultOptions={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:noop,labelDirection:"neutral",ignoreEmptyValues:!1};function determineAnchorPosition(e,t,s){const i=t.x>e.x;return i&&"explode"===s||!i&&"implode"===s?"start":i&&"implode"===s||!i&&"explode"===s?"end":"middle"}class PieChart extends BaseChart{createChart(e){const{data:t}=this,s=normalizeData(t),i=[];let r,n,a=e.startAngle;const o=createSvg(this.container,e.width,e.height,e.donut?e.classNames.chartDonut:e.classNames.chartPie);this.svg=o;const l=createChartRect(o,e);let c=Math.min(l.width()/2,l.height()/2);const h=e.total||s.series.reduce(sum,0),u=quantity(e.donutWidth);"%"===u.unit&&(u.value*=c/100),c-=e.donut?u.value/2:0,n="outside"===e.labelPosition||e.donut?c:"center"===e.labelPosition?0:c/2,e.labelOffset&&(n+=e.labelOffset);const d={x:l.x1+l.width()/2,y:l.y2+l.height()/2},p=1===t.series.filter((e=>safeHasProperty(e,"value")?0!==e.value:0!==e)).length;t.series.forEach(((e,t)=>i[t]=o.elem("g"))),e.showLabel&&(r=o.elem("g")),t.series.forEach(((o,m)=>{var g,x;if(0===s.series[m]&&e.ignoreEmptyValues)return;const f=safeHasProperty(o,"name")&&o.name,v=safeHasProperty(o,"className")&&o.className,y=safeHasProperty(o,"meta")?o.meta:void 0;f&&i[m].attr({"ct:series-name":f}),i[m].addClass([null===(g=e.classNames)||void 0===g?void 0:g.series,v||"".concat(null===(x=e.classNames)||void 0===x?void 0:x.series,"-").concat(alphaNumerate(m))].join(" "));let w=h>0?a+s.series[m]/h*360:0;const b=Math.max(0,a-(0===m||p?0:.2));w-b>=359.99&&(w=b+359.99);const S=polarToCartesian(d.x,d.y,c,b),A=polarToCartesian(d.x,d.y,c,w),E=new SvgPath(!e.donut).move(A.x,A.y).arc(c,c,0,Number(w-a>180),0,S.x,S.y);e.donut||E.line(d.x,d.y);const M=i[m].elem("path",{d:E.stringify()},e.donut?e.classNames.sliceDonut:e.classNames.slicePie);if(M.attr({"ct:value":s.series[m],"ct:meta":serialize(y)}),e.donut&&M.attr({style:"stroke-width: "+u.value+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:s.series[m],totalDataSum:h,index:m,meta:y,series:o,group:i[m],element:M,path:E.clone(),center:d,radius:c,startAngle:a,endAngle:w,chartRect:l}),e.showLabel){let i,c;i=1===t.series.length?{x:d.x,y:d.y}:polarToCartesian(d.x,d.y,n,a+(w-a)/2),c=s.labels&&!isFalseyButZero(s.labels[m])?s.labels[m]:s.series[m];const h=e.labelInterpolationFnc(c,m);if(h||0===h){const t=r.elem("text",{dx:i.x,dy:i.y,"text-anchor":determineAnchorPosition(d,i,e.labelDirection)},e.classNames.label).text(String(h));this.eventEmitter.emit("draw",{type:"label",index:m,group:r,element:t,text:""+h,chartRect:l,series:o,meta:y,...i})}}a=w})),this.eventEmitter.emit("created",{chartRect:l,svg:o,options:e})}constructor(e,t,s,i){super(e,t,defaultOptions,extend({},defaultOptions,s),i),this.data=t}}exports.AutoScaleAxis=AutoScaleAxis,exports.Axis=Axis,exports.BarChart=BarChart,exports.BaseChart=BaseChart,exports.EPSILON=EPSILON,exports.EventEmitter=EventEmitter,exports.FixedScaleAxis=FixedScaleAxis,exports.Interpolation=index,exports.LineChart=LineChart,exports.PieChart=PieChart,exports.StepAxis=StepAxis,exports.Svg=Svg,exports.SvgList=SvgList,exports.SvgPath=SvgPath,exports.alphaNumerate=alphaNumerate,exports.axisUnits=axisUnits,exports.createChartRect=createChartRect,exports.createGrid=createGrid,exports.createGridBackground=createGridBackground,exports.createLabel=createLabel,exports.createSvg=createSvg,exports.deserialize=deserialize,exports.determineAnchorPosition=determineAnchorPosition,exports.each=each,exports.easings=easings,exports.ensureUnit=ensureUnit,exports.escapingMap=escapingMap,exports.extend=extend,exports.getBounds=getBounds,exports.getHighLow=getHighLow,exports.getMetaData=getMetaData,exports.getMultiValue=getMultiValue,exports.getNumberOrUndefined=getNumberOrUndefined,exports.getSeriesOption=getSeriesOption,exports.isArrayOfArrays=isArrayOfArrays,exports.isArrayOfSeries=isArrayOfSeries,exports.isDataHoleValue=isDataHoleValue,exports.isFalseyButZero=isFalseyButZero,exports.isMultiValue=isMultiValue,exports.isNumeric=isNumeric,exports.namespaces=namespaces,exports.noop=noop,exports.normalizeData=normalizeData,exports.normalizePadding=normalizePadding,exports.optionsProvider=optionsProvider,exports.orderOfMagnitude=orderOfMagnitude,exports.polarToCartesian=polarToCartesian,exports.precision=8,exports.projectLength=projectLength,exports.quantity=quantity,exports.rho=rho,exports.roundWithPrecision=roundWithPrecision,exports.safeHasProperty=safeHasProperty,exports.serialMap=serialMap,exports.serialize=serialize,exports.splitIntoSegments=splitIntoSegments,exports.sum=sum,exports.times=times;